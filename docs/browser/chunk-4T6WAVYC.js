import{M as z,a as g,b as O,l as r}from"./chunk-K4VOPVC6.js";var l="tms_organizations",u=class d{constructor(){this.initializeDemoOrganizations()}getOrganizations(a,t,n=1,i=10){let e=this.getOrganizationsFromStorage();if(a&&(e=e.filter(s=>s.country===a)),t){let s=t.toLowerCase();e=e.filter(c=>c.name.toLowerCase().includes(s)||c.alias.toLowerCase().includes(s))}let o=(n-1)*i,m=e.slice(o,o+i);return r({data:m,total:e.length})}getOrganizationById(a){let n=this.getOrganizationsFromStorage().find(i=>i._id===a);return r(n||null)}createOrganization(a){let t=this.getOrganizationsFromStorage(),n=new Date,i=O(g({_id:this.generateId()},a),{createdAt:n,updatedAt:n,isActive:!0});return t.push(i),this.saveOrganizationsToStorage(t),r(i)}updateOrganization(a,t){let n=this.getOrganizationsFromStorage(),i=n.findIndex(o=>o._id===a);if(i===-1)return r(null);let e=O(g(g({},n[i]),t),{updatedAt:new Date});return n[i]=e,this.saveOrganizationsToStorage(n),r(e)}deleteOrganization(a){let t=this.getOrganizationsFromStorage(),n=t.findIndex(i=>i._id===a);return n===-1?r(!1):(t.splice(n,1),this.saveOrganizationsToStorage(t),r(!0))}getOrganizationsFromStorage(){let a=localStorage.getItem(l);return a?JSON.parse(a):[]}saveOrganizationsToStorage(a){localStorage.setItem(l,JSON.stringify(a))}generateId(){return Math.random().toString(36).substr(2,9)}initializeDemoOrganizations(){if(this.getOrganizationsFromStorage().length===0){let t=new Date,n=[{_id:"1",name:"Headquarters",alias:"HQ",address:"123 Main Street, New Delhi, India",country:"IN",units:["Finance","HR","IT","Operations","Sales"],createdAt:t,updatedAt:t,isActive:!0},{_id:"2",name:"Regional Office",alias:"RO",address:"456 Business Park, Mumbai, India",country:"IN",units:["Regional Sales","Customer Support","Logistics"],createdAt:t,updatedAt:t,isActive:!0}];this.saveOrganizationsToStorage(n)}}static \u0275fac=function(t){return new(t||d)};static \u0275prov=z({token:d,factory:d.\u0275fac,providedIn:"root"})};export{u as a};
