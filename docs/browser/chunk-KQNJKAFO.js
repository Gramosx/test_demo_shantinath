import{M as u,a as i,b as l,l as o}from"./chunk-K4VOPVC6.js";var m="tms_users",d=class a{constructor(){this.initializeDemoUsers()}getUsers(){let e=this.getUsersFromStorage();return o(e)}getUser(e){let s=this.getUsersFromStorage().find(t=>t.id===e);return o(s||null)}createUser(e){let r=this.getUsersFromStorage(),s=new Date,t={id:this.generateId(),username:e.username||"",fullName:e.fullName||"",email:e.email||"",role:e.role||"USER",isActive:!0,createdAt:s,updatedAt:s};return r.push(t),this.saveUsersToStorage(r),o(t)}updateUser(e,r){let s=this.getUsersFromStorage(),t=s.findIndex(c=>c.id===e);if(t===-1)return o(null);let n=l(i(i({},s[t]),r),{updatedAt:new Date});return s[t]=n,this.saveUsersToStorage(s),o(n)}deleteUser(e){let r=this.getUsersFromStorage(),s=r.findIndex(t=>t.id===e);return s===-1?o(!1):(r.splice(s,1),this.saveUsersToStorage(r),o(!0))}getUsersFromStorage(){let e=localStorage.getItem(m);return e?JSON.parse(e):[]}saveUsersToStorage(e){localStorage.setItem(m,JSON.stringify(e))}generateId(){return Math.random().toString(36).substr(2,9)}initializeDemoUsers(){if(this.getUsersFromStorage().length===0){let r=new Date,s=[{id:"1",username:"admin",fullName:"Admin User",email:"admin@example.com",role:"ADMIN",isActive:!0,createdAt:r,updatedAt:r},{id:"2",username:"superadmin",fullName:"Super Admin",email:"superadmin@example.com",role:"SUPER_ADMIN",isActive:!0,createdAt:r,updatedAt:r},{id:"3",username:"user",fullName:"Regular User",email:"user@example.com",role:"USER",isActive:!0,createdAt:r,updatedAt:r}];this.saveUsersToStorage(s)}}static \u0275fac=function(r){return new(r||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
